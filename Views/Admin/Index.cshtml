@{
    ViewData["Title"] = "Admin Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="content container py-4">
    <!-- Navbar -->
    <nav class="navbar navbar-light bg-light p-3 mb-4 rounded shadow-sm d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
            <h4 class="fw-bold mb-0 me-3">📊 Admin Dashboard</h4>
            <span id="liveTime" class="text-muted small"></span>
        </div>
        <div class="d-flex align-items-center">
            <img src="~/images/admin-avatar.png" alt="Avatar" class="rounded-circle me-2" width="40" height="40" />
            <span class="fw-semibold me-3">Xin chào, Admin</span>
            <button class="btn btn-outline-secondary btn-sm">Logout</button>
        </div>
    </nav>

    <!-- Summary Cards -->
    <div class="content">
       

        <!-- Summary Cards -->
        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="card" style="background-color: #3498db; color: white;">
                    <div class="card-title" id="totalRevenue">
                        @((Model?.TotalRevenue ?? 0).ToString("#,0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))) đ


                    </div>
                    <p>Doanh thu (VND)</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card" style="background-color: #2980b9; color: white;">
                    <div class="card-title" id="totalOrders">@((Model?.TotalOrders) ?? 0)</div>
                    <p>Số đơn hàng</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card" style="background-color: #f1c40f; color: white;">
                    <div class="card-title" id="totalProductsSold">@((Model?.TotalProductsSold) ?? 0)</div>
                    <p>Số sản phẩm bán</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card" style="background-color: #e74c3c; color: white;">
                    <div class="card-title">@((Model?.TotalOrdersCancel) ?? 0)</div>
                    <p>Đơn hàng hủy</p>
                </div>
            </div>
        </div>

        <!-- Notification Area -->

    </div>


    <!-- 3 khối thông tin -->
    <div class="row g-4">
        <!-- Sản phẩm sắp hết hàng -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-light fw-semibold">
                    ⚠️ Sản phẩm sắp hết hàng
                </div>
                <div class="card-body">
                    <table class="table table-sm align-middle">
                        <thead>
                            <tr>
                                <th>Tên sản phẩm</th>
                                <th>Tồn kho</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Áo Thun Trơn</td>
                                <td><span class="badge bg-danger">3</span></td>
                            </tr>
                            <tr>
                                <td>Giày Sneaker Nam</td>
                                <td><span class="badge bg-danger">5</span></td>
                            </tr>
                            <tr>
                                <td>Túi Xách Nữ</td>
                                <td><span class="badge bg-warning">7</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Voucher sắp hết hạn -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-light fw-semibold">
                    🧾 Voucher sắp hết hạn
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>SALE10 (Giảm 10%)</span>
                            <small class="text-danger">Hết hạn: 30/10/2025</small>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>FREESHIP50</span>
                            <small class="text-danger">Hết hạn: 01/11/2025</small>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>NEWUSER</span>
                            <small class="text-danger">Hết hạn: 05/11/2025</small>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Hoạt động gần đây -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 h-100">
                <div class="card-header bg-light fw-semibold">
                    🕒 Hoạt động gần đây
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Admin thêm sản phẩm mới: “Áo Hoodie”</span>
                            <small class="text-muted">10 phút trước</small>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Đơn hàng #1203 đã được xác nhận</span>
                            <small class="text-muted">1 giờ trước</small>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Người dùng “huynguyen” vừa đăng ký</span>
                            <small class="text-muted">2 giờ trước</small>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // 🕒 Cập nhật thời gian hiện tại
        function updateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const time = now.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const date = now.toLocaleDateString('vi-VN', options);
            document.getElementById("liveTime").textContent = `${time} | ${date}`;
        }
        setInterval(updateTime, 1000);
        updateTime();
    </script>
}
